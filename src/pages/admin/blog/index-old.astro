---
import AdminLayout from '@/layouts/AdminLayout.astro';
import BlogManager from '@/components/admin/BlogManager.tsx';
import { getAdminAuth, requireAdmin } from '@/lib/auth';

// Protect this page - only admins can access
const auth = await getAdminAuth(Astro);
const user = requireAdmin(auth);

if (!user) {
  return Astro.redirect('/auth/login?redirect=/admin/blog');
}
---

<AdminLayout title="Gestión de Blog" user={user} currentPage="/admin/blog">
  <div class="p-6">
    <!-- Header -->
    <div class="mb-8">
      <h2 class="text-2xl font-bold text-gray-900">
        Gestión de Blog
      </h2>
      <p class="text-gray-600 mt-1">Administra artículos, guías y contenido del blog</p>
    </div>

    <!-- Blog Manager Component -->
    <BlogManager client:load user={user} />
  </div>
</AdminLayout>
