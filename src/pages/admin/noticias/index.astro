---
import AdminLayout from '@/layouts/AdminLayout.astro';
import NewsManager from '@/components/admin/NewsManager.tsx';
import { getAdminAuth, requireAdmin } from '@/lib/auth';

// Protect this page - only admins can access
const auth = await getAdminAuth(Astro);
const user = requireAdmin(auth);

if (!user) {
  return Astro.redirect('/auth/login?redirect=/admin/noticias');
}
---

<AdminLayout title="Gestión de Noticias" user={user} currentPage="/admin/noticias">
  <div class="p-6">
    <!-- Header -->
    <div class="mb-8">
      <h2 class="text-2xl font-bold text-gray-900">
        Gestión de Noticias
      </h2>
      <p class="text-gray-600 mt-1">Administra noticias de la industria, empresa, productos y eventos</p>
    </div>

    <!-- News Manager Component -->
    <NewsManager client:load user={user} />
  </div>
</AdminLayout>
